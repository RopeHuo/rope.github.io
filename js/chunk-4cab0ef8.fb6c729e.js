(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-4cab0ef8"],{"159b":function(e,t,n){var r=n("da84"),a=n("fdbc"),i=n("17c2"),c=n("9112");for(var s in a){var o=r[s],u=o&&o.prototype;if(u&&u.forEach!==i)try{c(u,"forEach",i)}catch(l){u.forEach=i}}},"17c2":function(e,t,n){"use strict";var r=n("b727").forEach,a=n("a640"),i=n("ae40"),c=a("forEach"),s=i("forEach");e.exports=c&&s?[].forEach:function(e){return r(this,e,arguments.length>1?arguments[1]:void 0)}},"25f0":function(e,t,n){"use strict";var r=n("6eeb"),a=n("825a"),i=n("d039"),c=n("ad6d"),s="toString",o=RegExp.prototype,u=o[s],l=i((function(){return"/a/b"!=u.call({source:"a",flags:"b"})})),f=u.name!=s;(l||f)&&r(RegExp.prototype,s,(function(){var e=a(this),t=String(e.source),n=e.flags,r=String(void 0===n&&e instanceof RegExp&&!("flags"in o)?c.call(e):n);return"/"+t+"/"+r}),{unsafe:!0})},"2f80":function(e,t,n){"use strict";n.r(t);var r=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"face_recognition"},[n("div",{staticClass:"option"},[n("div",{staticClass:"org"},[n("label",[e._v("更换图片org")]),n("input",{attrs:{type:"file",accept:"image/png, image/jpeg"},on:{change:function(t){return e.fnChange(t,"org")}}})]),n("div",{staticClass:"det"},[n("label",[e._v("更换图片det")]),n("input",{attrs:{type:"file",accept:"image/png, image/jpeg"},on:{change:function(t){return e.fnChange(t,"det")}}})]),n("div",[n("label",[e._v("选择算法模型")]),n("label",[e._v(" ssdMobilenetv1 "),n("input",{directives:[{name:"model",rawName:"v-model",value:e.nets,expression:"nets"}],attrs:{type:"radio",value:"ssdMobilenetv1"},domProps:{checked:e._q(e.nets,"ssdMobilenetv1")},on:{change:function(t){e.nets="ssdMobilenetv1"}}})]),n("label",[e._v(" tinyFaceDetector "),n("input",{directives:[{name:"model",rawName:"v-model",value:e.nets,expression:"nets"}],attrs:{type:"radio",value:"tinyFaceDetector"},domProps:{checked:e._q(e.nets,"tinyFaceDetector")},on:{change:function(t){e.nets="tinyFaceDetector"}}})]),n("label",[e._v(" mtcnn "),n("input",{directives:[{name:"model",rawName:"v-model",value:e.nets,expression:"nets"}],attrs:{type:"radio",value:"mtcnn"},domProps:{checked:e._q(e.nets,"mtcnn")},on:{change:function(t){e.nets="mtcnn"}}})])])]),e._m(0)])},a=[function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"see"},[n("div",{staticClass:"org"},[n("img",{attrs:{id:"orgImg",src:"images/xxm/xxm03.jpg"}}),n("canvas",{attrs:{id:"orgCanvas"}})]),n("div",{staticClass:"det"},[n("img",{attrs:{id:"detImg",src:"images/cp02.jpg"}}),n("canvas",{attrs:{id:"detCanvas"}})])])}],i=(n("4160"),n("d3b7"),n("25f0"),n("159b"),n("96cf"),n("1da1")),c=n("ab39"),s={name:"FaceRecognition",data:function(){return{nets:"ssdMobilenetv1",faceMatcher:null,orgImgEl:null,orgCanvasEl:null,detImgEl:null,detCanvasEl:null}},watch:{nets:function(e){var t=this;this.nets=e,this.fnInit().then((function(){return t.fnRun("org")})).then((function(){return t.fnRun("det")}))}},mounted:function(){var e=this;this.$nextTick((function(){e.fnInit().then((function(){return e.fnRun("org")})).then((function(){return e.fnRun("det")}))}))},methods:{fnInit:function(){var e=this;return Object(i["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,c["nets"][e.nets].loadFromUri("/models");case 2:return t.next=4,c["loadFaceLandmarkModel"]("/models");case 4:return t.next=6,c["loadFaceRecognitionModel"]("/models");case 6:t.t0=e.nets,t.next="ssdMobilenetv1"===t.t0?9:"tinyFaceDetector"===t.t0?11:"mtcnn"===t.t0?13:15;break;case 9:return e.options=new c["SsdMobilenetv1Options"]({minConfidence:.5}),t.abrupt("break",15);case 11:return e.options=new c["TinyFaceDetectorOptions"]({inputSize:512,scoreThreshold:.5}),t.abrupt("break",15);case 13:return e.options=new c["MtcnnOptions"]({minFaceSize:20,scaleFactor:.709}),t.abrupt("break",15);case 15:e.orgImgEl=document.getElementById("orgImg"),e.orgCanvasEl=document.getElementById("orgCanvas"),e.detImgEl=document.getElementById("detImg"),e.detCanvasEl=document.getElementById("detCanvas");case 19:case"end":return t.stop()}}),t)})))()},fnRun:function(e){var t=this;return Object(i["a"])(regeneratorRuntime.mark((function n(){var r,a;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:if(t.faceMatcher||"det"!==e){n.next=2;break}return n.abrupt("return");case 2:return n.next=4,c["detectAllFaces"](t[e+"ImgEl"],t.options).withFaceLandmarks().withFaceDescriptors();case 4:if(r=n.sent,r.length){n.next=8;break}return t.faceMatcher=null,n.abrupt("return");case 8:if("org"!==e){n.next=12;break}return n.next=11,new c["FaceMatcher"](r);case 11:t.faceMatcher=n.sent;case 12:c["matchDimensions"](t[e+"CanvasEl"],t[e+"ImgEl"]),a=c["resizeResults"](r,t[e+"ImgEl"]),a.forEach((function(n){var r=n.detection,a=n.descriptor,i=t.faceMatcher.findBestMatch(a),s="org"===e?i["label"]:i.toString();new c["draw"].DrawBox(r.box,{label:s}).draw(t[e+"CanvasEl"])}));case 15:case"end":return n.stop()}}),n)})))()},fnChange:function(e,t){var n=this;if(e.target.files.length){var r=this[t+"CanvasEl"];c["bufferToImage"](e.target.files[0]).then((function(e){n[t+"ImgEl"].src=e.src,r.getContext("2d").clearRect(0,0,r.width,r.height),"org"===t?n.fnRun("org").then((function(){return n.fnRun("det")})):n.fnRun("det")}))}}}},o=s,u=(n("5001"),n("2877")),l=Object(u["a"])(o,r,a,!1,null,"7b96d4ef",null);t["default"]=l.exports},4160:function(e,t,n){"use strict";var r=n("23e7"),a=n("17c2");r({target:"Array",proto:!0,forced:[].forEach!=a},{forEach:a})},5001:function(e,t,n){"use strict";var r=n("a2e4"),a=n.n(r);a.a},"65f0":function(e,t,n){var r=n("861d"),a=n("e8b5"),i=n("b622"),c=i("species");e.exports=function(e,t){var n;return a(e)&&(n=e.constructor,"function"!=typeof n||n!==Array&&!a(n.prototype)?r(n)&&(n=n[c],null===n&&(n=void 0)):n=void 0),new(void 0===n?Array:n)(0===t?0:t)}},a2e4:function(e,t,n){},a640:function(e,t,n){"use strict";var r=n("d039");e.exports=function(e,t){var n=[][e];return!!n&&r((function(){n.call(null,t||function(){throw 1},1)}))}},ad6d:function(e,t,n){"use strict";var r=n("825a");e.exports=function(){var e=r(this),t="";return e.global&&(t+="g"),e.ignoreCase&&(t+="i"),e.multiline&&(t+="m"),e.dotAll&&(t+="s"),e.unicode&&(t+="u"),e.sticky&&(t+="y"),t}},ae40:function(e,t,n){var r=n("83ab"),a=n("d039"),i=n("5135"),c=Object.defineProperty,s={},o=function(e){throw e};e.exports=function(e,t){if(i(s,e))return s[e];t||(t={});var n=[][e],u=!!i(t,"ACCESSORS")&&t.ACCESSORS,l=i(t,0)?t[0]:o,f=i(t,1)?t[1]:void 0;return s[e]=!!n&&!a((function(){if(u&&!r)return!0;var e={length:-1};u?c(e,1,{enumerable:!0,get:o}):e[1]=1,n.call(e,l,f)}))}},b727:function(e,t,n){var r=n("0366"),a=n("44ad"),i=n("7b0b"),c=n("50c4"),s=n("65f0"),o=[].push,u=function(e){var t=1==e,n=2==e,u=3==e,l=4==e,f=6==e,d=5==e||f;return function(g,v,m,p){for(var h,b,E=i(g),x=a(E),y=r(v,m,3),C=c(x.length),S=0,w=p||s,L=t?w(g,C):n?w(g,0):void 0;C>S;S++)if((d||S in x)&&(h=x[S],b=y(h,S,E),e))if(t)L[S]=b;else if(b)switch(e){case 3:return!0;case 5:return h;case 6:return S;case 2:o.call(L,h)}else if(l)return!1;return f?-1:u||l?l:L}};e.exports={forEach:u(0),map:u(1),filter:u(2),some:u(3),every:u(4),find:u(5),findIndex:u(6)}},e8b5:function(e,t,n){var r=n("c6b6");e.exports=Array.isArray||function(e){return"Array"==r(e)}},fdbc:function(e,t){e.exports={CSSRuleList:0,CSSStyleDeclaration:0,CSSValueList:0,ClientRectList:0,DOMRectList:0,DOMStringList:0,DOMTokenList:1,DataTransferItemList:0,FileList:0,HTMLAllCollection:0,HTMLCollection:0,HTMLFormElement:0,HTMLSelectElement:0,MediaList:0,MimeTypeArray:0,NamedNodeMap:0,NodeList:1,PaintRequestList:0,Plugin:0,PluginArray:0,SVGLengthList:0,SVGNumberList:0,SVGPathSegList:0,SVGPointList:0,SVGStringList:0,SVGTransformList:0,SourceBufferList:0,StyleSheetList:0,TextTrackCueList:0,TextTrackList:0,TouchList:0}}}]);
//# sourceMappingURL=chunk-4cab0ef8.fb6c729e.js.map