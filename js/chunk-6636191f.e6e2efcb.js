(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-6636191f"],{"159b":function(e,t,n){var a=n("da84"),r=n("fdbc"),o=n("17c2"),c=n("9112");for(var i in r){var s=a[i],d=s&&s.prototype;if(d&&d.forEach!==o)try{c(d,"forEach",o)}catch(u){d.forEach=o}}},"17c2":function(e,t,n){"use strict";var a=n("b727").forEach,r=n("a640"),o=n("ae40"),c=r("forEach"),i=o("forEach");e.exports=c&&i?[].forEach:function(e){return a(this,e,arguments.length>1?arguments[1]:void 0)}},"1dde":function(e,t,n){var a=n("d039"),r=n("b622"),o=n("2d00"),c=r("species");e.exports=function(e){return o>=51||!a((function(){var t=[],n=t.constructor={};return n[c]=function(){return{foo:1}},1!==t[e](Boolean).foo}))}},4160:function(e,t,n){"use strict";var a=n("23e7"),r=n("17c2");a({target:"Array",proto:!0,forced:[].forEach!=r},{forEach:r})},"65f0":function(e,t,n){var a=n("861d"),r=n("e8b5"),o=n("b622"),c=o("species");e.exports=function(e,t){var n;return r(e)&&(n=e.constructor,"function"!=typeof n||n!==Array&&!r(n.prototype)?a(n)&&(n=n[c],null===n&&(n=void 0)):n=void 0),new(void 0===n?Array:n)(0===t?0:t)}},"99af":function(e,t,n){"use strict";var a=n("23e7"),r=n("d039"),o=n("e8b5"),c=n("861d"),i=n("7b0b"),s=n("50c4"),d=n("8418"),u=n("65f0"),l=n("1dde"),v=n("b622"),f=n("2d00"),m=v("isConcatSpreadable"),h=9007199254740991,p="Maximum allowed index exceeded",w=f>=51||!r((function(){var e=[];return e[m]=!1,e.concat()[0]!==e})),b=l("concat"),g=function(e){if(!c(e))return!1;var t=e[m];return void 0!==t?!!t:o(e)},x=!w||!b;a({target:"Array",proto:!0,forced:x},{concat:function(e){var t,n,a,r,o,c=i(this),l=u(c,0),v=0;for(t=-1,a=arguments.length;t<a;t++)if(o=-1===t?c:arguments[t],g(o)){if(r=s(o.length),v+r>h)throw TypeError(p);for(n=0;n<r;n++,v++)n in o&&d(l,v,o[n])}else{if(v>=h)throw TypeError(p);d(l,v++,o)}return l.length=v,l}})},a10e:function(e,t,n){},a640:function(e,t,n){"use strict";var a=n("d039");e.exports=function(e,t){var n=[][e];return!!n&&a((function(){n.call(null,t||function(){throw 1},1)}))}},ae40:function(e,t,n){var a=n("83ab"),r=n("d039"),o=n("5135"),c=Object.defineProperty,i={},s=function(e){throw e};e.exports=function(e,t){if(o(i,e))return i[e];t||(t={});var n=[][e],d=!!o(t,"ACCESSORS")&&t.ACCESSORS,u=o(t,0)?t[0]:s,l=o(t,1)?t[1]:void 0;return i[e]=!!n&&!r((function(){if(d&&!a)return!0;var e={length:-1};d?c(e,1,{enumerable:!0,get:s}):e[1]=1,n.call(e,u,l)}))}},b727:function(e,t,n){var a=n("0366"),r=n("44ad"),o=n("7b0b"),c=n("50c4"),i=n("65f0"),s=[].push,d=function(e){var t=1==e,n=2==e,d=3==e,u=4==e,l=6==e,v=5==e||l;return function(f,m,h,p){for(var w,b,g=o(f),x=r(g),E=a(m,h,3),y=c(x.length),F=0,k=p||i,R=t?k(f,y):n?k(f,0):void 0;y>F;F++)if((v||F in x)&&(w=x[F],b=E(w,F,g),e))if(t)R[F]=b;else if(b)switch(e){case 3:return!0;case 5:return w;case 6:return F;case 2:s.call(R,w)}else if(u)return!1;return l?-1:d||u?u:R}};e.exports={forEach:d(0),map:d(1),filter:d(2),some:d(3),every:d(4),find:d(5),findIndex:d(6)}},cb97:function(e,t,n){"use strict";var a=n("a10e"),r=n.n(a);r.a},cd10:function(e,t,n){"use strict";n.r(t);var a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"video_face_recognition"},[n("div",{staticClass:"option"},[n("div",[n("label",[e._v("视频控制：")]),n("button",{on:{click:e.fnPaused}},[e._v("暂停Or播放")])]),n("div",[n("label",[e._v("更换视频：")]),n("input",{attrs:{type:"file",accept:"video/mp4, video/ogg, video/webm"},on:{change:function(t){return e.fnChange(t)}}})]),n("div",[n("span",{staticStyle:{"margin-right":"20px"}},[e._v("检测识别类型：")]),n("label",[e._v(" 轮廓检测 "),n("input",{directives:[{name:"model",rawName:"v-model",value:e.detection,expression:"detection"}],attrs:{type:"radio",value:"landmark"},domProps:{checked:e._q(e.detection,"landmark")},on:{change:function(t){e.detection="landmark"}}})]),n("label",[e._v(" 表情检测 "),n("input",{directives:[{name:"model",rawName:"v-model",value:e.detection,expression:"detection"}],attrs:{type:"radio",value:"expression"},domProps:{checked:e._q(e.detection,"expression")},on:{change:function(t){e.detection="expression"}}})]),n("label",[e._v(" 年龄性别检测 "),n("input",{directives:[{name:"model",rawName:"v-model",value:e.detection,expression:"detection"}],attrs:{type:"radio",value:"age_gender"},domProps:{checked:e._q(e.detection,"age_gender")},on:{change:function(t){e.detection="age_gender"}}})])]),n("div",[n("label",[e._v("边框Or面部轮廓：")]),n("input",{directives:[{name:"model",rawName:"v-model",value:e.withBoxes,expression:"withBoxes"}],attrs:{type:"checkbox"},domProps:{checked:Array.isArray(e.withBoxes)?e._i(e.withBoxes,null)>-1:e.withBoxes},on:{change:function(t){var n=e.withBoxes,a=t.target,r=!!a.checked;if(Array.isArray(n)){var o=null,c=e._i(n,o);a.checked?c<0&&(e.withBoxes=n.concat([o])):c>-1&&(e.withBoxes=n.slice(0,c).concat(n.slice(c+1)))}else e.withBoxes=r}}})]),n("div",[n("label",[e._v("检测人脸：")]),n("label",[e._v(" 可信单 "),n("input",{directives:[{name:"model",rawName:"v-model",value:e.detectFace,expression:"detectFace"}],attrs:{type:"radio",value:"detectSingleFace"},domProps:{checked:e._q(e.detectFace,"detectSingleFace")},on:{change:function(t){e.detectFace="detectSingleFace"}}})]),n("label",[e._v(" 模糊多 "),n("input",{directives:[{name:"model",rawName:"v-model",value:e.detectFace,expression:"detectFace"}],attrs:{type:"radio",value:"detectAllFaces"},domProps:{checked:e._q(e.detectFace,"detectAllFaces")},on:{change:function(t){e.detectFace="detectAllFaces"}}})])]),n("div",[n("label",[e._v("选择算法模型")]),n("label",[e._v(" ssdMobilenetv1 "),n("input",{directives:[{name:"model",rawName:"v-model",value:e.nets,expression:"nets"}],attrs:{type:"radio",value:"ssdMobilenetv1"},domProps:{checked:e._q(e.nets,"ssdMobilenetv1")},on:{change:function(t){e.nets="ssdMobilenetv1"}}})]),n("label",[e._v(" tinyFaceDetector "),n("input",{directives:[{name:"model",rawName:"v-model",value:e.nets,expression:"nets"}],attrs:{type:"radio",value:"tinyFaceDetector"},domProps:{checked:e._q(e.nets,"tinyFaceDetector")},on:{change:function(t){e.nets="tinyFaceDetector"}}})]),n("label",[e._v(" mtcnn "),n("input",{directives:[{name:"model",rawName:"v-model",value:e.nets,expression:"nets"}],attrs:{type:"radio",value:"mtcnn"},domProps:{checked:e._q(e.nets,"mtcnn")},on:{change:function(t){e.nets="mtcnn"}}})])])]),n("div",{staticClass:"see"},[n("video",{attrs:{id:"myVideo",src:"videos/test.mp4",muted:"",playsinline:""},domProps:{muted:!0}}),n("canvas",{attrs:{id:"myCanvas"}})])])},r=[],o=(n("99af"),n("4160"),n("d3b7"),n("3ca3"),n("159b"),n("ddb0"),n("2b3d"),n("96cf"),n("1da1")),c=n("ab39"),i={name:"VideoAgeAndGenderRecognition",data:function(){return{nets:"tinyFaceDetector",options:null,withBoxes:!0,detectFace:"detectSingleFace",detection:"landmark",videoEl:null,canvasEl:null,timeout:0}},watch:{nets:function(e){this.nets=e,this.fnInit()},detection:function(e){var t=this;this.detection=e,this.videoEl.paused||(this.videoEl.pause(),setTimeout((function(){t.videoEl.play(),setTimeout((function(){return t.fnRun()}),300)}),300))}},mounted:function(){var e=this;this.$nextTick((function(){e.fnInit()}))},methods:{fnInit:function(){var e=this;return Object(o["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,c["nets"][e.nets].loadFromUri("/models");case 2:return t.next=4,c["loadFaceLandmarkModel"]("/models");case 4:return t.next=6,c["loadFaceExpressionModel"]("/models");case 6:return t.next=8,c["loadAgeGenderModel"]("/models");case 8:t.t0=e.nets,t.next="ssdMobilenetv1"===t.t0?11:"tinyFaceDetector"===t.t0?13:"mtcnn"===t.t0?15:17;break;case 11:return e.options=new c["SsdMobilenetv1Options"]({minConfidence:.5}),t.abrupt("break",17);case 13:return e.options=new c["TinyFaceDetectorOptions"]({inputSize:512,scoreThreshold:.5}),t.abrupt("break",17);case 15:return e.options=new c["MtcnnOptions"]({minFaceSize:20,scaleFactor:.709}),t.abrupt("break",17);case 17:e.videoEl=document.getElementById("myVideo"),e.canvasEl=document.getElementById("myCanvas");case 19:case"end":return t.stop()}}),t)})))()},fnRunFaceLandmark:function(){var e=this;return Object(o["a"])(regeneratorRuntime.mark((function t(){var n,a,r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(console.log("RunFaceLandmark"),!e.videoEl.paused){t.next=3;break}return t.abrupt("return",clearTimeout(e.timeout));case 3:return t.next=5,c[e.detectFace](e.videoEl,e.options).withFaceLandmarks();case 5:n=t.sent,n?(a=c["matchDimensions"](e.canvasEl,e.videoEl,!0),r=c["resizeResults"](n,a),e.withBoxes?c["draw"].drawDetections(e.canvasEl,r):c["draw"].drawFaceLandmarks(e.canvasEl,r)):e.canvasEl.getContext("2d").clearRect(0,0,e.canvasEl.width,e.canvasEl.height),e.timeout=setTimeout((function(){return e.fnRunFaceLandmark()}));case 8:case"end":return t.stop()}}),t)})))()},fnRunFaceExpression:function(){var e=this;return Object(o["a"])(regeneratorRuntime.mark((function t(){var n,a,r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(console.log("RunFaceExpression"),!e.videoEl.paused){t.next=3;break}return t.abrupt("return",clearTimeout(e.timeout));case 3:return t.next=5,c[e.detectFace](e.videoEl,e.options).withFaceLandmarks().withFaceExpressions();case 5:n=t.sent,n?(a=c["matchDimensions"](e.canvasEl,e.videoEl,!0),r=c["resizeResults"](n,a),c["draw"].drawFaceExpressions(e.canvasEl,r,.5),e.withBoxes?c["draw"].drawDetections(e.canvasEl,r):c["draw"].drawFaceLandmarks(e.canvasEl,r)):e.canvasEl.getContext("2d").clearRect(0,0,e.canvasEl.width,e.canvasEl.height),e.timeout=setTimeout((function(){return e.fnRunFaceExpression()}));case 8:case"end":return t.stop()}}),t)})))()},fnRunFaceAgeAndGender:function(){var e=this;return Object(o["a"])(regeneratorRuntime.mark((function t(){var n,a,r,o,i,s;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(console.log("RunFaceAgeAndGender"),!e.videoEl.paused){t.next=3;break}return t.abrupt("return",clearTimeout(e.timeout));case 3:return t.next=5,c[e.detectFace](e.videoEl,e.options).withFaceLandmarks().withAgeAndGender();case 5:n=t.sent,n?(a=c["matchDimensions"](e.canvasEl,e.videoEl,!0),r=c["resizeResults"](n,a),e.withBoxes?c["draw"].drawDetections(e.canvasEl,r):c["draw"].drawFaceLandmarks(e.canvasEl,r),Array.isArray(r)?r.forEach((function(t){var n=t.age,a=t.gender,r=t.genderProbability;new c["draw"].DrawTextField(["".concat(Math.round(n,0)," years"),"".concat(a," (").concat(Math.round(r),")")],t.detection.box.bottomLeft).draw(e.canvasEl)})):(o=r.age,i=r.gender,s=r.genderProbability,new c["draw"].DrawTextField(["".concat(Math.round(o,0)," years"),"".concat(i," (").concat(Math.round(s),")")],r.detection.box.bottomLeft).draw(e.canvasEl))):e.canvasEl.getContext("2d").clearRect(0,0,e.canvasEl.width,e.canvasEl.height),e.timeout=setTimeout((function(){return e.fnRunFaceAgeAndGender()}));case 8:case"end":return t.stop()}}),t)})))()},fnRun:function(){"landmark"!==this.detection?"expression"!==this.detection?"age_gender"!==this.detection||this.fnRunFaceAgeAndGender():this.fnRunFaceExpression():this.fnRunFaceLandmark()},fnPaused:function(){var e=this;this.videoEl.paused?(this.videoEl.play(),setTimeout((function(){return e.fnRun()}),300)):this.videoEl.pause()},fnChange:function(e){var t=this;e.target.files.length&&(this.videoEl.pause(),setTimeout((function(){t.canvasEl.getContext("2d").clearRect(0,0,t.canvasEl.width,t.canvasEl.height),t.videoEl.src=URL.createObjectURL(e.target.files[0])}),300))}},beforeDestroy:function(){this.videoEl.pause(),clearTimeout(this.timeout)}},s=i,d=(n("cb97"),n("2877")),u=Object(d["a"])(s,a,r,!1,null,"aea9cd84",null);t["default"]=u.exports},e8b5:function(e,t,n){var a=n("c6b6");e.exports=Array.isArray||function(e){return"Array"==a(e)}}}]);
//# sourceMappingURL=chunk-6636191f.e6e2efcb.js.map