(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-109b9771"],{"3f4b":function(e,n,t){},b58d:function(e,n,t){"use strict";t.r(n);var a=function(){var e=this,n=e.$createElement,t=e._self._c||n;return t("div",{staticClass:"face_expression_recognition"},[t("div",{staticClass:"option"},[t("div",[t("label",[e._v("更换图片")]),t("input",{attrs:{type:"file",accept:"image/png, image/jpeg"},on:{change:function(n){return e.fnChange(n)}}})]),t("div",[t("label",[e._v("边框Or面部轮廓")]),t("input",{directives:[{name:"model",rawName:"v-model",value:e.withBoxes,expression:"withBoxes"}],attrs:{type:"checkbox"},domProps:{checked:Array.isArray(e.withBoxes)?e._i(e.withBoxes,null)>-1:e.withBoxes},on:{change:function(n){var t=e.withBoxes,a=n.target,s=!!a.checked;if(Array.isArray(t)){var i=null,r=e._i(t,i);a.checked?r<0&&(e.withBoxes=t.concat([i])):r>-1&&(e.withBoxes=t.slice(0,r).concat(t.slice(r+1)))}else e.withBoxes=s}}})]),t("div",[t("label",[e._v("选择算法模型")]),t("label",[e._v(" ssdMobilenetv1 "),t("input",{directives:[{name:"model",rawName:"v-model",value:e.nets,expression:"nets"}],attrs:{type:"radio",value:"ssdMobilenetv1"},domProps:{checked:e._q(e.nets,"ssdMobilenetv1")},on:{change:function(n){e.nets="ssdMobilenetv1"}}})]),t("label",[e._v(" tinyFaceDetector "),t("input",{directives:[{name:"model",rawName:"v-model",value:e.nets,expression:"nets"}],attrs:{type:"radio",value:"tinyFaceDetector"},domProps:{checked:e._q(e.nets,"tinyFaceDetector")},on:{change:function(n){e.nets="tinyFaceDetector"}}})]),t("label",[e._v(" mtcnn "),t("input",{directives:[{name:"model",rawName:"v-model",value:e.nets,expression:"nets"}],attrs:{type:"radio",value:"mtcnn"},domProps:{checked:e._q(e.nets,"mtcnn")},on:{change:function(n){e.nets="mtcnn"}}})])])]),e._m(0)])},s=[function(){var e=this,n=e.$createElement,t=e._self._c||n;return t("div",{staticClass:"see"},[t("img",{attrs:{id:"myImg",src:"images/xxm/xxm04.jpg"}}),t("canvas",{attrs:{id:"myCanvas"}})])}],i=(t("96cf"),t("1da1")),r=t("ab39"),c={name:"FaceExpressionRecognition",data:function(){return{nets:"ssdMobilenetv1",options:null,withBoxes:!0,imgEl:null,canvasEl:null}},watch:{nets:function(e){var n=this;this.nets=e,this.fnInit().then((function(){return n.fnRun()}))},withBoxes:function(e){this.withBoxes=e,this.fnRun()}},mounted:function(){var e=this;this.$nextTick((function(){e.fnInit().then((function(){return e.fnRun()}))}))},methods:{fnInit:function(){var e=this;return Object(i["a"])(regeneratorRuntime.mark((function n(){return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return n.next=2,r["nets"][e.nets].loadFromUri("/models");case 2:return n.next=4,r["loadFaceLandmarkModel"]("/models");case 4:return n.next=6,r["loadFaceExpressionModel"]("/models");case 6:n.t0=e.nets,n.next="ssdMobilenetv1"===n.t0?9:"tinyFaceDetector"===n.t0?11:"mtcnn"===n.t0?13:15;break;case 9:return e.options=new r["SsdMobilenetv1Options"]({minConfidence:.5}),n.abrupt("break",15);case 11:return e.options=new r["TinyFaceDetectorOptions"]({inputSize:224,scoreThreshold:.5}),n.abrupt("break",15);case 13:return e.options=new r["MtcnnOptions"]({minFaceSize:20,scaleFactor:.709}),n.abrupt("break",15);case 15:e.imgEl=document.getElementById("myImg"),e.canvasEl=document.getElementById("myCanvas");case 17:case"end":return n.stop()}}),n)})))()},fnRun:function(){var e=this;return Object(i["a"])(regeneratorRuntime.mark((function n(){var t,a;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return n.next=2,r["detectAllFaces"](e.imgEl,e.options).withFaceLandmarks().withFaceExpressions();case 2:t=n.sent,r["matchDimensions"](e.canvasEl,e.imgEl),a=r["resizeResults"](t,e.imgEl),e.withBoxes?r["draw"].drawDetections(e.canvasEl,a):r["draw"].drawFaceLandmarks(e.canvasEl,a),r["draw"].drawFaceExpressions(e.canvasEl,a,.05);case 7:case"end":return n.stop()}}),n)})))()},fnChange:function(e){var n=this;e.target.files.length&&r["bufferToImage"](e.target.files[0]).then((function(e){n.imgEl.src=e.src,n.canvasEl.getContext("2d").clearRect(0,0,n.canvasEl.width,n.canvasEl.height),n.fnRun()}))}}},o=c,l=(t("e0d3"),t("2877")),u=Object(l["a"])(o,a,s,!1,null,"33b7276b",null);n["default"]=u.exports},e0d3:function(e,n,t){"use strict";var a=t("3f4b"),s=t.n(a);s.a}}]);
//# sourceMappingURL=chunk-109b9771.52463ec2.js.map