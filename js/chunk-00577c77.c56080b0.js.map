{"version":3,"sources":["webpack:///./src/views/FaceLandmarkDetection.vue?83cd","webpack:///src/views/FaceLandmarkDetection.vue","webpack:///./src/views/FaceLandmarkDetection.vue?12df","webpack:///./src/views/FaceLandmarkDetection.vue","webpack:///./src/views/FaceLandmarkDetection.vue?a7e9"],"names":["render","_vm","this","_h","$createElement","_c","_self","staticClass","_v","attrs","on","$event","fnChange","directives","name","rawName","value","expression","domProps","Array","isArray","withBoxes","_i","$$a","$$el","target","$$c","checked","$$v","$$i","concat","slice","_q","nets","_m","staticRenderFns","data","options","imgEl","canvasEl","watch","val","fnInit","then","fnRun","mounted","$nextTick","methods","e","files","length","component"],"mappings":"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","file":"js/chunk-00577c77.c56080b0.js","sourcesContent":["var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"face_landmark_detection\"},[_c('div',{staticClass:\"option\"},[_c('div',[_c('label',[_vm._v(\"更换图片\")]),_c('input',{attrs:{\"type\":\"file\",\"accept\":\"image/png, image/jpeg\"},on:{\"change\":function($event){return _vm.fnChange($event)}}})]),_c('div',[_c('label',[_vm._v(\"边框Or面部轮廓\")]),_c('input',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.withBoxes),expression:\"withBoxes\"}],attrs:{\"type\":\"checkbox\"},domProps:{\"checked\":Array.isArray(_vm.withBoxes)?_vm._i(_vm.withBoxes,null)>-1:(_vm.withBoxes)},on:{\"change\":function($event){var $$a=_vm.withBoxes,$$el=$event.target,$$c=$$el.checked?(true):(false);if(Array.isArray($$a)){var $$v=null,$$i=_vm._i($$a,$$v);if($$el.checked){$$i<0&&(_vm.withBoxes=$$a.concat([$$v]))}else{$$i>-1&&(_vm.withBoxes=$$a.slice(0,$$i).concat($$a.slice($$i+1)))}}else{_vm.withBoxes=$$c}}}})]),_c('div',[_c('label',[_vm._v(\"选择算法模型\")]),_c('label',[_vm._v(\" ssdMobilenetv1 \"),_c('input',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.nets),expression:\"nets\"}],attrs:{\"type\":\"radio\",\"value\":\"ssdMobilenetv1\"},domProps:{\"checked\":_vm._q(_vm.nets,\"ssdMobilenetv1\")},on:{\"change\":function($event){_vm.nets=\"ssdMobilenetv1\"}}})]),_c('label',[_vm._v(\" tinyFaceDetector \"),_c('input',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.nets),expression:\"nets\"}],attrs:{\"type\":\"radio\",\"value\":\"tinyFaceDetector\"},domProps:{\"checked\":_vm._q(_vm.nets,\"tinyFaceDetector\")},on:{\"change\":function($event){_vm.nets=\"tinyFaceDetector\"}}})]),_c('label',[_vm._v(\" mtcnn \"),_c('input',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.nets),expression:\"nets\"}],attrs:{\"type\":\"radio\",\"value\":\"mtcnn\"},domProps:{\"checked\":_vm._q(_vm.nets,\"mtcnn\")},on:{\"change\":function($event){_vm.nets=\"mtcnn\"}}})])])]),_vm._m(0)])}\nvar staticRenderFns = [function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"see\"},[_c('img',{attrs:{\"id\":\"myImg\",\"src\":\"images/xxm/xxm03.jpg\"}}),_c('canvas',{attrs:{\"id\":\"myCanvas\"}})])}]\n\nexport { render, staticRenderFns }","<template>\r\n  <div class=\"face_landmark_detection\">\r\n    <div class=\"option\">\r\n      <div>\r\n        <label>更换图片</label>\r\n        <input\r\n          type=\"file\"\r\n          accept=\"image/png, image/jpeg\"\r\n          @change=\"fnChange($event)\"\r\n        />\r\n      </div>\r\n      <div>\r\n        <label>边框Or面部轮廓</label>\r\n        <input type=\"checkbox\" v-model=\"withBoxes\" />\r\n      </div>\r\n      <div>\r\n        <label>选择算法模型</label>\r\n        <label>\r\n          ssdMobilenetv1\r\n          <input type=\"radio\" v-model=\"nets\" value=\"ssdMobilenetv1\" />\r\n        </label>\r\n        <label>\r\n          tinyFaceDetector\r\n          <input type=\"radio\" v-model=\"nets\" value=\"tinyFaceDetector\" />\r\n        </label>\r\n        <label>\r\n          mtcnn\r\n          <input type=\"radio\" v-model=\"nets\" value=\"mtcnn\" />\r\n        </label>\r\n      </div>\r\n    </div>\r\n    <div class=\"see\">\r\n      <img id=\"myImg\" src=\"images/xxm/xxm03.jpg\" />\r\n      <canvas id=\"myCanvas\" />\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport * as faceapi from \"face-api.js\";\r\nexport default {\r\n  name: \"FaceLandmarkDetection\",\r\n  data() {\r\n    return {\r\n      nets: \"ssdMobilenetv1\", // 模型\r\n      options: null, // 模型参数\r\n      withBoxes: true, // 边框or轮廓\r\n      imgEl: null,\r\n      canvasEl: null,\r\n    };\r\n  },\r\n  watch: {\r\n    nets(val) {\r\n      this.nets = val;\r\n      this.fnInit().then(() => this.fnRun());\r\n    },\r\n    withBoxes(val) {\r\n      this.withBoxes = val;\r\n      this.fnRun();\r\n    },\r\n  },\r\n  mounted() {\r\n    this.$nextTick(() => {\r\n      this.fnInit().then(() => this.fnRun());\r\n    });\r\n  },\r\n  methods: {\r\n    // 初始化模型加载\r\n    async fnInit() {\r\n      await faceapi.nets[this.nets].loadFromUri(\"/models\");\r\n      await faceapi.loadFaceLandmarkModel(\"/models\");\r\n      // 根据模型参数识别调整结果\r\n      switch (this.nets) {\r\n        case \"ssdMobilenetv1\":\r\n          this.options = new faceapi.SsdMobilenetv1Options({\r\n            minConfidence: 0.5, // 0.1 ~ 0.9\r\n          });\r\n          break;\r\n        case \"tinyFaceDetector\":\r\n          this.options = new faceapi.TinyFaceDetectorOptions({\r\n            inputSize: 512, // 160 224 320 416 512 608\r\n            scoreThreshold: 0.5, // 0.1 ~ 0.9\r\n          });\r\n          break;\r\n        case \"mtcnn\":\r\n          this.options = new faceapi.MtcnnOptions({\r\n            minFaceSize: 20, // 1 - 50\r\n            scaleFactor: 0.709, // 0.1 ~ 0.9\r\n          });\r\n          break;\r\n      }\r\n      // 节点属性化\r\n      this.imgEl = document.getElementById(\"myImg\");\r\n      this.canvasEl = document.getElementById(\"myCanvas\");\r\n    },\r\n    // 执行识别绘制\r\n    async fnRun() {\r\n      const results = await faceapi\r\n        .detectAllFaces(this.imgEl, this.options)\r\n        .withFaceLandmarks();\r\n      faceapi.matchDimensions(this.canvasEl, this.imgEl);\r\n      const resizedResults = faceapi.resizeResults(results, this.imgEl);\r\n      this.withBoxes\r\n        ? faceapi.draw.drawDetections(this.canvasEl, resizedResults)\r\n        : faceapi.draw.drawFaceLandmarks(this.canvasEl, resizedResults);\r\n    },\r\n    // 更换图片\r\n    fnChange(e) {\r\n      if (!e.target.files.length) return;\r\n      // 将文件显示为图像并识别\r\n      faceapi.bufferToImage(e.target.files[0]).then((img) => {\r\n        this.imgEl.src = img.src;\r\n        this.canvasEl\r\n          .getContext(\"2d\")\r\n          .clearRect(0, 0, this.canvasEl.width, this.canvasEl.height);\r\n        this.fnRun();\r\n      });\r\n    },\r\n  },\r\n};\r\n</script>\r\n\r\n<style scoped>\r\n.see {\r\n  position: relative;\r\n}\r\n.see img {\r\n  max-width: 600px;\r\n  max-height: 400px;\r\n}\r\n.see canvas {\r\n  position: absolute;\r\n  top: 0;\r\n  left: 0;\r\n}\r\n.option {\r\n  padding-bottom: 20px;\r\n}\r\n.option div {\r\n  padding: 10px;\r\n  border-bottom: 2px #42b983 solid;\r\n}\r\n.option div label {\r\n  margin-right: 20px;\r\n}\r\n</style>\r\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./FaceLandmarkDetection.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./FaceLandmarkDetection.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./FaceLandmarkDetection.vue?vue&type=template&id=745f7584&scoped=true&\"\nimport script from \"./FaceLandmarkDetection.vue?vue&type=script&lang=js&\"\nexport * from \"./FaceLandmarkDetection.vue?vue&type=script&lang=js&\"\nimport style0 from \"./FaceLandmarkDetection.vue?vue&type=style&index=0&id=745f7584&scoped=true&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"745f7584\",\n  null\n  \n)\n\nexport default component.exports","import mod from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./FaceLandmarkDetection.vue?vue&type=style&index=0&id=745f7584&scoped=true&lang=css&\"; export default mod; export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./FaceLandmarkDetection.vue?vue&type=style&index=0&id=745f7584&scoped=true&lang=css&\""],"sourceRoot":""}