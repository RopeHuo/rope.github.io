(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-4fce4a86"],{"75f7":function(e,t,n){},af27:function(e,t,n){"use strict";n.r(t);var a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"video_face_detector"},[n("div",{staticClass:"option"},[n("div",[n("label",[e._v("视频控制：")]),n("button",{on:{click:e.fnPaused}},[e._v("暂停Or播放")])]),n("div",[n("label",[e._v("更换视频：")]),n("input",{attrs:{type:"file",accept:"video/mp4, video/ogg, video/webm"},on:{change:function(t){return e.fnChange(t)}}})]),n("div",[n("label",[e._v("检测人脸：")]),n("label",[e._v(" 可信单 "),n("input",{directives:[{name:"model",rawName:"v-model",value:e.detectFace,expression:"detectFace"}],attrs:{type:"radio",value:"detectSingleFace"},domProps:{checked:e._q(e.detectFace,"detectSingleFace")},on:{change:function(t){e.detectFace="detectSingleFace"}}})]),n("label",[e._v(" 模糊多 "),n("input",{directives:[{name:"model",rawName:"v-model",value:e.detectFace,expression:"detectFace"}],attrs:{type:"radio",value:"detectAllFaces"},domProps:{checked:e._q(e.detectFace,"detectAllFaces")},on:{change:function(t){e.detectFace="detectAllFaces"}}})])]),n("div",[n("label",[e._v("选择算法模型")]),n("label",[e._v(" ssdMobilenetv1 "),n("input",{directives:[{name:"model",rawName:"v-model",value:e.nets,expression:"nets"}],attrs:{type:"radio",value:"ssdMobilenetv1"},domProps:{checked:e._q(e.nets,"ssdMobilenetv1")},on:{change:function(t){e.nets="ssdMobilenetv1"}}})]),n("label",[e._v(" tinyFaceDetector "),n("input",{directives:[{name:"model",rawName:"v-model",value:e.nets,expression:"nets"}],attrs:{type:"radio",value:"tinyFaceDetector"},domProps:{checked:e._q(e.nets,"tinyFaceDetector")},on:{change:function(t){e.nets="tinyFaceDetector"}}})]),n("label",[e._v(" mtcnn "),n("input",{directives:[{name:"model",rawName:"v-model",value:e.nets,expression:"nets"}],attrs:{type:"radio",value:"mtcnn"},domProps:{checked:e._q(e.nets,"mtcnn")},on:{change:function(t){e.nets="mtcnn"}}})])])]),n("div",{staticClass:"see"},[n("video",{attrs:{id:"myVideo",src:"videos/test.mp4",muted:"",playsinline:""},domProps:{muted:!0}}),n("canvas",{attrs:{id:"myCanvas"}})])])},c=[],i=(n("d3b7"),n("3ca3"),n("ddb0"),n("2b3d"),n("96cf"),n("1da1")),s=n("ab39"),o={name:"VideoFaceDetector",data:function(){return{nets:"tinyFaceDetector",options:null,detectFace:"detectSingleFace",videoEl:null,canvasEl:null,timeout:0}},watch:{nets:function(e){this.nets=e,this.fnInit()}},mounted:function(){var e=this;this.$nextTick((function(){e.fnInit()}))},methods:{fnInit:function(){var e=this;return Object(i["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,s["nets"][e.nets].loadFromUri("/models");case 2:return t.next=4,s["loadFaceLandmarkModel"]("/models");case 4:t.t0=e.nets,t.next="ssdMobilenetv1"===t.t0?7:"tinyFaceDetector"===t.t0?9:"mtcnn"===t.t0?11:13;break;case 7:return e.options=new s["SsdMobilenetv1Options"]({minConfidence:.5}),t.abrupt("break",13);case 9:return e.options=new s["TinyFaceDetectorOptions"]({inputSize:512,scoreThreshold:.5}),t.abrupt("break",13);case 11:return e.options=new s["MtcnnOptions"]({minFaceSize:20,scaleFactor:.709}),t.abrupt("break",13);case 13:e.videoEl=document.getElementById("myVideo"),e.canvasEl=document.getElementById("myCanvas");case 15:case"end":return t.stop()}}),t)})))()},fnRun:function(){var e=this;return Object(i["a"])(regeneratorRuntime.mark((function t(){var n,a,c;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(console.log("Run"),!e.videoEl.paused){t.next=3;break}return t.abrupt("return",clearTimeout(e.timeout));case 3:return t.next=5,s[e.detectFace](e.videoEl,e.options);case 5:n=t.sent,n&&!e.videoEl.paused?(a=s["matchDimensions"](e.canvasEl,e.videoEl,!0),c=s["resizeResults"](n,a),s["draw"].drawDetections(e.canvasEl,c)):e.canvasEl.getContext("2d").clearRect(0,0,e.canvasEl.width,e.canvasEl.height),e.timeout=setTimeout((function(){return e.fnRun()}));case 8:case"end":return t.stop()}}),t)})))()},fnPaused:function(){var e=this;this.videoEl.paused?(this.videoEl.play(),setTimeout((function(){return e.fnRun()}),300)):this.videoEl.pause()},fnChange:function(e){var t=this;e.target.files.length&&(this.videoEl.pause(),setTimeout((function(){t.canvasEl.getContext("2d").clearRect(0,0,t.canvasEl.width,t.canvasEl.height),t.videoEl.src=URL.createObjectURL(e.target.files[0])}),300))}},beforeDestroy:function(){this.videoEl.pause(),clearTimeout(this.timeout)}},r=o,d=(n("b278"),n("2877")),l=Object(d["a"])(r,a,c,!1,null,"f0f38a20",null);t["default"]=l.exports},b278:function(e,t,n){"use strict";var a=n("75f7"),c=n.n(a);c.a}}]);
//# sourceMappingURL=chunk-4fce4a86.25551d60.js.map